# Test info

- Name: 電卓の基本機能テスト >> 基本的な四則演算ができる
- Location: /home/dev/workspace/github.com/Keiji-Miyake/120-web-projects/src/features/calculator/__tests__/e2e/calculator.spec.ts:55:3

# Error details

```
Error: browserType.launch: 
╔══════════════════════════════════════════════════════╗
║ Host system is missing dependencies to run browsers. ║
║ Missing libraries:                                   ║
║     libgstcodecparsers-1.0.so.0                      ║
║     libmanette-0.2.so.0                              ║
╚══════════════════════════════════════════════════════╝
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 | import type { Page, Locator } from '@playwright/test';
   3 |
   4 | // フィクスチャーとして共通の前準備を定義
   5 | test.beforeEach(async ({ page }) => {
   6 |   await page.goto('/');
   7 |   await page.waitForLoadState('networkidle');
   8 |   await page.waitForLoadState('domcontentloaded');
   9 |   
   10 |   const calculatorLink = await page.getByRole('link', { name: 'シンプルな電卓' });
   11 |   await calculatorLink.waitFor({ state: 'visible' });
   12 |   await calculatorLink.click();
   13 |
   14 |   await page.waitForLoadState('networkidle');
   15 |   await page.waitForLoadState('domcontentloaded');
   16 | });
   17 |
   18 | // ボタンとディスプレイの取得を補助する関数
   19 | interface CalculatorElements {
   20 |   display: Locator;
   21 |   getButton: (text: string) => Locator;
   22 |   numpad: Locator[];
   23 |   operators: {
   24 |     plus: Locator;
   25 |     minus: Locator;
   26 |     multiply: Locator;
   27 |     divide: Locator;
   28 |     equals: Locator;
   29 |     clear: Locator;
   30 |     decimal: Locator;
   31 |   };
   32 | }
   33 |
   34 | const getCalculatorElements = (page: Page): CalculatorElements => {
   35 |   const display = page.locator('input[type="text"]');
   36 |   const getButton = (text: string) => page.getByRole('button', { name: text, exact: true });
   37 |   
   38 |   return {
   39 |     display,
   40 |     getButton,
   41 |     numpad: Array(10).fill(0).map((_, i) => getButton(i.toString())),
   42 |     operators: {
   43 |       plus: getButton('+'),
   44 |       minus: getButton('-'),
   45 |       multiply: getButton('×'),
   46 |       divide: getButton('÷'),
   47 |       equals: getButton('='),
   48 |       clear: getButton('C'),
   49 |       decimal: getButton('.')
   50 |     }
   51 |   };
   52 | };
   53 |
   54 | test.describe('電卓の基本機能テスト', () => {
>  55 |   test('基本的な四則演算ができる', async ({ page }) => {
      |   ^ Error: browserType.launch: 
   56 |     const { display, numpad, operators } = getCalculatorElements(page);
   57 |     await display.waitFor({ state: 'visible' });
   58 |
   59 |     // 足し算 (1 + 2 = 3)
   60 |     await numpad[1].click();
   61 |     await operators.plus.click();
   62 |     await numpad[2].click();
   63 |     await operators.equals.click();
   64 |     await expect(display).toHaveValue('3');
   65 |
   66 |     // 引き算 (5 - 3 = 2)
   67 |     await operators.clear.click();
   68 |     await numpad[5].click();
   69 |     await operators.minus.click();
   70 |     await numpad[3].click();
   71 |     await operators.equals.click();
   72 |     await expect(display).toHaveValue('2');
   73 |
   74 |     // 掛け算 (4 × 5 = 20)
   75 |     await operators.clear.click();
   76 |     await numpad[4].click();
   77 |     await operators.multiply.click();
   78 |     await numpad[5].click();
   79 |     await operators.equals.click();
   80 |     await expect(display).toHaveValue('20');
   81 |
   82 |     // 割り算 (8 ÷ 2 = 4)
   83 |     await operators.clear.click();
   84 |     await numpad[8].click();
   85 |     await operators.divide.click();
   86 |     await numpad[2].click();
   87 |     await operators.equals.click();
   88 |     await expect(display).toHaveValue('4');
   89 |   });
   90 |
   91 |   test('複雑な計算ができる', async ({ page }) => {
   92 |     const { display, numpad, operators } = getCalculatorElements(page);
   93 |
   94 |     // 5 × 6 ÷ 2 = 15
   95 |     await numpad[5].click();
   96 |     await operators.multiply.click();
   97 |     await numpad[6].click();
   98 |     await operators.divide.click();
   99 |     await numpad[2].click();
  100 |     await operators.equals.click();
  101 |     await expect(display).toHaveValue('15');
  102 |   });
  103 |
  104 |   test('小数点を含む計算ができる', async ({ page }) => {
  105 |     const { display, numpad, operators } = getCalculatorElements(page);
  106 |
  107 |     // 1.5 + 2.5 = 4
  108 |     await numpad[1].click();
  109 |     await operators.decimal.click();
  110 |     await numpad[5].click();
  111 |     await operators.plus.click();
  112 |     await numpad[2].click();
  113 |     await operators.decimal.click();
  114 |     await numpad[5].click();
  115 |     await operators.equals.click();
  116 |     await expect(display).toHaveValue('4');
  117 |   });
  118 |
  119 |   test('ゼロ除算を適切に処理できる', async ({ page }) => {
  120 |     const { display, numpad, operators } = getCalculatorElements(page);
  121 |
  122 |     // 5 ÷ 0 = Error
  123 |     await numpad[5].click();
  124 |     await operators.divide.click();
  125 |     await numpad[0].click();
  126 |     await operators.equals.click();
  127 |     await expect(display).toHaveValue('0で割ることはできません');
  128 |   });
  129 |
  130 |   test('大きな数値を適切に処理できる', async ({ page }) => {
  131 |     const { display, numpad, operators } = getCalculatorElements(page);
  132 |
  133 |     // 999999 × 999999 の計算
  134 |     for (let i = 0; i < 6; i++) {
  135 |       await numpad[9].click();
  136 |     }
  137 |     await operators.multiply.click();
  138 |     for (let i = 0; i < 6; i++) {
  139 |       await numpad[9].click();
  140 |     }
  141 |     await operators.equals.click();
  142 |     
  143 |     // 結果が表示されることを確認（正確な値の代わりに表示が行われることを確認）
  144 |     await expect(display).not.toHaveValue('Error');
  145 |     await expect(display).not.toHaveValue('0');
  146 |   });
  147 |
  148 |   test('キーボード入力で計算できる', async ({ page }) => {
  149 |     const { display } = getCalculatorElements(page);
  150 |
  151 |     // キーボードで 1 + 2 = 3 を入力
  152 |     const { numpad, operators } = getCalculatorElements(page);
  153 |     await numpad[1].click();
  154 |     await operators.plus.click();
  155 |     await numpad[2].click();
```