# Test info

- Name: Todoアプリの基本機能テスト >> Todoを削除できる
- Location: /home/dev/workspace/github.com/Keiji-Miyake/120-web-projects/src/features/todo/__tests__/e2e/todo.spec.ts:85:3

# Error details

```
Error: browserType.launch: 
╔══════════════════════════════════════════════════════╗
║ Host system is missing dependencies to run browsers. ║
║ Missing libraries:                                   ║
║     libgstcodecparsers-1.0.so.0                      ║
║     libmanette-0.2.so.0                              ║
╚══════════════════════════════════════════════════════╝
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 |
   3 | // テストのタイムアウトを120秒に設定
   4 | test.setTimeout(120000);
   5 |
   6 | test.beforeEach(async ({ page }) => {
   7 |   // ベースURLに移動し、ページの読み込みを待機
   8 |   await page.goto('/');
   9 |   await page.waitForLoadState('domcontentloaded');
   10 |   await page.waitForLoadState('networkidle');
   11 |
   12 |   // Todoアプリのリンクを見つけて、表示されるまで待機
   13 |   const todoLink = page.getByRole('link', { name: 'シンプルなTodoアプリ' });
   14 |   await todoLink.waitFor({ state: 'visible', timeout: 30000 });
   15 |
   16 |   // リンクをクリックし、ページ遷移を待機
   17 |   await Promise.all([
   18 |     page.waitForNavigation({ waitUntil: 'networkidle' }),
   19 |     todoLink.click()
   20 |   ]);
   21 |
   22 |   // 新しいページでTodo入力フィールドが表示されるまで待機
   23 |   const todoInput = page.locator('[data-testid="todo-input"]');
   24 |   try {
   25 |     await todoInput.waitFor({ 
   26 |       state: 'visible',
   27 |       timeout: 30000 
   28 |     });
   29 |   } catch (error) {
   30 |     // デバッグ情報を収集
   31 |     console.error('Todo入力フィールドが見つかりません');
   32 |     await page.screenshot({ path: 'test-results/debug-todo-input.png' });
   33 |     throw error;
   34 |   }
   35 | });
   36 |
   37 | test.describe('Todoアプリの基本機能テスト', () => {
   38 |   test('新しいTodoを作成できる', async ({ page }) => {
   39 |     const todoInput = page.locator('[data-testid="todo-input"]');
   40 |     const todoList = page.locator('[data-testid="todo-list"]');
   41 |
   42 |     await todoInput.fill('プレイライトでE2Eテストを実装する');
   43 |     await page.keyboard.press('Enter');
   44 |
   45 |     await expect(todoList).toContainText('プレイライトでE2Eテストを実装する', {
   46 |       timeout: 10000
   47 |     });
   48 |   });
   49 |
   50 |   test('複数のTodoを作成・管理できる', async ({ page }) => {
   51 |     const todoInput = page.locator('[data-testid="todo-input"]');
   52 |     const todoList = page.locator('[data-testid="todo-list"]');
   53 |
   54 |     const todos = ['タスク1', 'タスク2', 'タスク3'];
   55 |     for (const todo of todos) {
   56 |       await todoInput.fill(todo);
   57 |       await page.keyboard.press('Enter');
   58 |       await expect(todoList).toContainText(todo, { timeout: 5000 });
   59 |     }
   60 |
   61 |     // すべてのTodoが表示されていることを確認
   62 |     for (const todo of todos) {
   63 |       await expect(todoList).toContainText(todo);
   64 |     }
   65 |   });
   66 |
   67 |   test('Todoの完了状態を切り替えできる', async ({ page }) => {
   68 |     const todoInput = page.locator('[data-testid="todo-input"]');
   69 |     const todoList = page.locator('[data-testid="todo-list"]');
   70 |
   71 |     await todoInput.fill('完了状態のテスト');
   72 |     await page.keyboard.press('Enter');
   73 |     await expect(todoList).toContainText('完了状態のテスト', { timeout: 5000 });
   74 |
   75 |     const checkbox = page.getByRole('checkbox').first();
   76 |     await checkbox.waitFor({ state: 'visible', timeout: 5000 });
   77 |     
   78 |     await checkbox.check();
   79 |     await expect(checkbox).toBeChecked();
   80 |
   81 |     await checkbox.uncheck();
   82 |     await expect(checkbox).not.toBeChecked();
   83 |   });
   84 |
>  85 |   test('Todoを削除できる', async ({ page }) => {
      |   ^ Error: browserType.launch: 
   86 |     const todoInput = page.locator('[data-testid="todo-input"]');
   87 |     const todoList = page.locator('[data-testid="todo-list"]');
   88 |
   89 |     await todoInput.fill('削除するタスク');
   90 |     await page.keyboard.press('Enter');
   91 |     await expect(todoList).toContainText('削除するタスク', { timeout: 5000 });
   92 |
   93 |     const todoItem = page.locator('[data-testid="todo-item"]').first();
   94 |     await todoItem.hover();
   95 |
   96 |     const deleteButton = page.getByRole('button', { name: '削除' });
   97 |     await deleteButton.waitFor({ state: 'visible', timeout: 5000 });
   98 |     await deleteButton.click();
   99 |
  100 |     await expect(todoList).not.toContainText('削除するタスク', { timeout: 5000 });
  101 |   });
  102 |
  103 |   test('空のTodoは作成できない', async ({ page }) => {
  104 |     const todoInput = page.locator('[data-testid="todo-input"]');
  105 |     const todoList = page.locator('[data-testid="todo-list"]');
  106 |     
  107 |     // 初期状態のTodo数を記録
  108 |     await todoList.waitFor({ state: 'visible', timeout: 5000 });
  109 |     const initialTodoCount = await todoList.locator('[data-testid="todo-item"]').count();
  110 |
  111 |     // 空文字でEnterを押す
  112 |     await todoInput.fill('');
  113 |     await page.keyboard.press('Enter');
  114 |
  115 |     // Todo数が変わっていないことを確認
  116 |     const currentTodoCount = await todoList.locator('[data-testid="todo-item"]').count();
  117 |     expect(currentTodoCount).toBe(initialTodoCount);
  118 |   });
  119 |
  120 |   test('長いTodoの表示が適切に処理される', async ({ page }) => {
  121 |     const todoInput = page.locator('[data-testid="todo-input"]');
  122 |     const todoList = page.locator('[data-testid="todo-list"]');
  123 |
  124 |     const longTodo = 'a'.repeat(100);
  125 |     await todoInput.fill(longTodo);
  126 |     await page.keyboard.press('Enter');
  127 |
  128 |     const todoItem = page.locator('[data-testid="todo-item"]').first();
  129 |     await expect(todoItem).toBeVisible({ timeout: 5000 });
  130 |     
  131 |     // 表示が崩れていないことを視覚的に確認
  132 |     await todoItem.screenshot({ path: 'test-results/long-todo.png' });
  133 |   });
  134 | });
  135 |
```